<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GYS: gys.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.3 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>gys.h</h1><a href="gys_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/******************************************************************************</span>
00002 <span class="comment"> *       GYS - library for developing interpreters of scripting languages,        *</span>
00003 <span class="comment"> *                                                                            *</span>
00004 <span class="comment"> *       Copyright (C) 2004  Govoruschenko Yuri Y.                                *</span>
00005 <span class="comment"> *       E-mail: ygy@users.sourceforge.net                                        *</span>
00006 <span class="comment"> *       Web: gys.sourceforge.net                                                 *</span>
00007 <span class="comment"> *                                                                            *</span>
00008 <span class="comment"> *   This library is free software; you can redistribute it and/or            *</span>
00009 <span class="comment"> *   modify it under the terms of the GNU Lesser General Public               *</span>
00010 <span class="comment"> *   License as published by the Free Software Foundation; either             *</span>
00011 <span class="comment"> *   version 2.1 of the License, or (at your option) any later version.       *</span>
00012 <span class="comment"> *                                                                            *</span>
00013 <span class="comment"> *   This library is distributed in the hope that it will be useful,          *</span>
00014 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of           *</span>
00015 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU        *</span>
00016 <span class="comment"> *   Lesser General Public License for more details.                          *</span>
00017 <span class="comment"> *                                                                            *</span>
00018 <span class="comment"> *   You should have received a copy of the GNU Lesser General Public         *</span>
00019 <span class="comment"> *   License along with this library; if not, write to the Free Software      *</span>
00020 <span class="comment"> *   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA *</span>
00021 <span class="comment"> ******************************************************************************/</span>
00022 
00027 <span class="preprocessor">#ifndef __GYS_</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define __GYS_</span>
00029 <span class="preprocessor"></span>
00030 <span class="preprocessor">#include &lt;iostream&gt;</span> 
00031 <span class="preprocessor">#include &lt;string&gt;</span>   
00032 <span class="preprocessor">#include &lt;map&gt;</span>      
00033 <span class="preprocessor">#include &lt;vector&gt;</span>   
00034 <span class="preprocessor">#include &lt;bitset&gt;</span>
00035 
00036 <span class="preprocessor">#include "ref_cnt_ptr.h"</span> <span class="comment">// smart pointers</span>
00037 
00038 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00039 
00040 <span class="comment">// for user</span>
00041 <span class="keyword">class  </span><a class="code" href="classGYS.html">GYS</a>;
00042 <span class="keyword">class  </span><a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>;
00043 
00044 <span class="comment">// for inner using</span>
00045 <span class="keyword">class  </span>GYS_binary_op;
00046 <span class="keyword">class  </span>GYS_pre_unary_op;
00047 <span class="keyword">class  </span>GYS_post_unary_op;
00048 
00049 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::GYS return values:::::::::::::::::::::::::::::::::::::::::</span>
00054 <span class="comment"></span>
<a name="l00055"></a><a class="code" href="group__std__types.html#a0">00055</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__std__types.html#a0">gys_void_type</a>      = <span class="stringliteral">"void"</span>; 
00056 
<a name="l00057"></a><a class="code" href="group__std__types.html#a1">00057</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__std__types.html#a1">gys_lvalue_type</a>    = <span class="stringliteral">"&lt;lvalue&gt;"</span>; 
<a name="l00058"></a><a class="code" href="group__std__types.html#a2">00058</a> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group__std__types.html#a2">gys_user_type</a>      = <span class="stringliteral">"&lt;user&gt;"</span>; 
00059 
00062 
00063 
<a name="l00072"></a><a class="code" href="classGYS__user__val.html">00072</a> <span class="keyword">class  </span><a class="code" href="classGYS__user__val.html">GYS_user_val</a> : <span class="keyword">public</span> RefCntObject
00073 {
00074 <span class="keyword">public</span>:
00076 
00079         <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code" href="classGYS__user__val.html#a0">get_user_val</a>() =0;
00080 
00082 
00085         <span class="keyword">virtual</span> string <a class="code" href="classGYS__user__val.html#a1">get_type_name</a>() <span class="keyword">const</span> =0;
00086 };
00087 
00089 
<a name="l00092"></a><a class="code" href="classGYS__ret__val.html">00092</a> <span class="keyword">class </span><a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>
00093 {
00094 <span class="keyword">private</span>:
00095         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>* lvalue; 
00096         RefCntPointer&lt;GYS_user_val&gt; user_val;
00097 
00098         string type_name;
00099 
00100 <span class="keyword">public</span>:
00102         <a class="code" href="classGYS__ret__val.html#a0">GYS_ret_val</a>();
00103 
00105 
<a name="l00108"></a><a class="code" href="classGYS__ret__val.html#a1">00108</a>         <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classGYS__ret__val.html#a0">GYS_ret_val</a>(T user_val) {
00109                 store(*<span class="keyword">this</span>, user_val);
00110         }
00111 
00112         <span class="comment">// ! Copy constructor</span>
00113         <a class="code" href="classGYS__ret__val.html#a0">GYS_ret_val</a>(<span class="keyword">const</span> <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; val);
00114 
00116 
00119         <a class="code" href="classGYS__ret__val.html#a0">GYS_ret_val</a>(<a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>* p);
00120 
00122 
00126         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; <a class="code" href="classGYS__ret__val.html#a4">operator=</a>(<span class="keyword">const</span> <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a> val);
00127 
00129 
<a name="l00133"></a><a class="code" href="classGYS__ret__val.html#a5">00133</a>         <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; <a class="code" href="classGYS__ret__val.html#a4">operator=</a>(T user_val) {
00134                 store(*<span class="keyword">this</span>, user_val);
00135                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00136         }
00137 
00139 
00143         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; <a class="code" href="classGYS__ret__val.html#a4">operator=</a>(<a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>* p);
00144 
00146         <span class="keywordtype">void</span> <a class="code" href="classGYS__ret__val.html#a7">clean</a>();
00147 
00149 
00152         string <a class="code" href="classGYS__ret__val.html#a8">get_type_name</a>() <span class="keyword">const</span>;
00153 
00155 
00158         <span class="keywordtype">bool</span> <a class="code" href="classGYS__ret__val.html#a9">is_lvalue</a>() <span class="keyword">const</span>;
00159 
00161 
00164         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; <a class="code" href="classGYS__ret__val.html#a10">set_lvalue</a>(<a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>* p);
00165 
00167 
00170         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>* <a class="code" href="classGYS__ret__val.html#a11">get_lvalue</a>() <span class="keyword">const</span>;
00171 
00173 
00176         <span class="keywordtype">void</span> <a class="code" href="classGYS__ret__val.html#a12">set_user_val</a>(<a class="code" href="classGYS__user__val.html">GYS_user_val</a>* user_val);
00177 
00179 
<a name="l00182"></a><a class="code" href="classGYS__ret__val.html#a13">00182</a>         <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>&amp; <a class="code" href="classGYS__ret__val.html#a13">set_val</a>(T user_val) {
00183                 <a class="code" href="classGYS__ret__val.html#a7">clean</a>();
00184                 store(*<span class="keyword">this</span>, user_val);
00185 
00186                 <span class="keywordflow">return</span> *<span class="keyword">this</span>;;
00187         }
00188 
00190 
<a name="l00193"></a><a class="code" href="classGYS__ret__val.html#a14">00193</a>         <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classGYS__ret__val.html#a14">operator T</a>() {
00194                 <span class="keywordtype">void</span>* v=<a class="code" href="classGYS__ret__val.html#a16">get_user_val</a>();
00195                 <span class="keywordflow">return</span> v ? *static_cast&lt;T*&gt;(v) : T(); <span class="comment">// avoiding crash</span>
00196         }
00197 
00199 
<a name="l00202"></a><a class="code" href="classGYS__ret__val.html#a15">00202</a>         <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classGYS__ret__val.html#a15">operator T*</a>() {
00203                 <span class="keywordtype">void</span>* v=<a class="code" href="classGYS__ret__val.html#a16">get_user_val</a>();
00204                 <span class="keywordflow">return</span> v ? static_cast&lt;T*&gt;(v) : 0;
00205         }
00206 
00208 
00214         <span class="keywordtype">void</span>* <a class="code" href="classGYS__ret__val.html#a16">get_user_val</a>();
00215 
00217 
00221         <a class="code" href="classGYS__user__val.html">GYS_user_val</a>* <a class="code" href="classGYS__ret__val.html#a17">get_ptr_to_user_val</a>() <span class="keyword">const</span>;
00222 
00224 
00227         <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a> <a class="code" href="classGYS__ret__val.html#a18">get_value</a>() <span class="keyword">const</span>;
00228 };
00229 
00230 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::Operators (not for user):::::::::::::::::::::::::::::::::::::::::</span>
00231 <span class="comment">// @ - operator</span>
00232 
00233 <span class="comment">// a@ b</span>
00238 <span class="comment"></span><span class="keyword">class </span>GYS_binary_op
00239 {
00240 <span class="keyword">private</span>:
00241         string name;     <span class="comment">// @</span>
00242         string l_type;   <span class="comment">// l-operand's type</span>
00243 
00244 <span class="keyword">public</span>:
00245         GYS_binary_op()
00246                 : name(""), l_type(<a class="code" href="group__std__types.html#a0">gys_void_type</a>) {}
00247 
00248         GYS_binary_op(string opname, string ltype)
00249                  : name(opname), l_type(ltype) {}
00250 
00251         <span class="keyword">inline</span> string get_comp_name() <span class="keyword">const</span> <span class="comment">// for &lt;</span>
00252         {
00253                 <span class="keywordflow">return</span> name+l_type;
00254         }
00255 };
00256 
00257 <span class="keywordtype">bool</span> <a class="code" href="gys_8cpp.html#a3">operator&lt;</a>(<span class="keyword">const</span> GYS_binary_op l, <span class="keyword">const</span> GYS_binary_op r); 
00258 
00259 <span class="comment">// @a</span>
00264 <span class="comment"></span><span class="keyword">class </span>GYS_pre_unary_op
00265 {
00266 <span class="keyword">private</span>:
00267         string name;     <span class="comment">// @</span>
00268         string ret_type; <span class="comment">// return value type</span>
00269 
00270 <span class="keyword">public</span>:
00271         GYS_pre_unary_op()
00272                 : name(""), ret_type(<a class="code" href="group__std__types.html#a0">gys_void_type</a>) {}
00273 
00274         GYS_pre_unary_op(string opname, string rettype)
00275                 : name(opname), ret_type(rettype) {}    
00276 
00277         <span class="keyword">inline</span> string get_comp_name() <span class="keyword">const</span> <span class="comment">// for &lt;</span>
00278         {
00279                 <span class="keywordflow">return</span> name+ret_type;
00280         }
00281 };
00282 
00283 <span class="keywordtype">bool</span> <a class="code" href="gys_8cpp.html#a3">operator&lt;</a>(<span class="keyword">const</span> GYS_pre_unary_op l, <span class="keyword">const</span> GYS_pre_unary_op r); 
00284 
00285 <span class="comment">// a@</span>
00290 <span class="comment"></span><span class="keyword">class </span>GYS_post_unary_op
00291 {
00292 <span class="keyword">private</span>:
00293         string name;   <span class="comment">// @</span>
00294         string l_type; <span class="comment">// operand's type</span>
00295 
00296 <span class="keyword">public</span>:
00297         GYS_post_unary_op() : name(""), l_type(<a class="code" href="group__std__types.html#a0">gys_void_type</a>) {}
00298 
00299         GYS_post_unary_op(string opname, string ltype) : name(opname), l_type(ltype) {} 
00300 
00301         <span class="keyword">inline</span> string get_comp_name() <span class="keyword">const</span>  <span class="comment">// for &lt;</span>
00302         {
00303                 <span class="keywordflow">return</span> name+l_type;
00304         }
00305 };
00306 
00307 <span class="keywordtype">bool</span> <a class="code" href="gys_8cpp.html#a3">operator&lt;</a>(<span class="keyword">const</span> GYS_post_unary_op l, <span class="keyword">const</span> GYS_post_unary_op r); 
00308 
00309 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::Converter (not for user):::::::::::::::::::::::::::::::::::::::::</span>
00315 <span class="comment"></span><span class="keyword">class </span>GYS_converter
00316 {
00317 <span class="keyword">private</span>:
00318         string from_type, into_type;
00319 
00320 <span class="keyword">public</span>:
00321         GYS_converter() : from_type(<a class="code" href="group__std__types.html#a0">gys_void_type</a>), into_type(<a class="code" href="group__std__types.html#a0">gys_void_type</a>) {}
00322         
00323         GYS_converter(string from, string into) : from_type(from), into_type(into) {}
00324 
00325         <span class="keyword">inline</span> string get_comp_name() <span class="keyword">const</span> <span class="comment">// for &lt;</span>
00326         {
00327                 <span class="keywordflow">return</span> from_type+into_type;
00328         }
00329 };
00330 
00331 <span class="keywordtype">bool</span> <a class="code" href="gys_8cpp.html#a3">operator&lt;</a>(<span class="keyword">const</span> GYS_converter l, <span class="keyword">const</span> GYS_converter r); 
00332 
00333 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::Functions for GYS-derived language definition:::::::::::::::::::::::::::::::::::::::::</span>
00334 
<a name="l00339"></a><a class="code" href="group__proto.html#a0">00339</a> <span class="keyword">typedef</span> <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>(*GYS_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*); 
00340 
<a name="l00341"></a><a class="code" href="group__proto.html#a1">00341</a> <span class="keyword">typedef</span> <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>(*GYS_TYPE_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*); 
00342 
<a name="l00343"></a><a class="code" href="group__proto.html#a2">00343</a> <span class="keyword">typedef</span> <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>(*GYS_BINARY_OP_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, <a class="code" href="classGYS__ret__val.html">GYS_ret_val</a>, GYS_ret_val); 
<a name="l00344"></a><a class="code" href="group__proto.html#a3">00344</a> <span class="keyword">typedef</span> GYS_ret_val(*GYS_PRE_UNARY_OP_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, GYS_ret_val);           
<a name="l00345"></a><a class="code" href="group__proto.html#a4">00345</a> <span class="keyword">typedef</span> GYS_ret_val(*GYS_POST_UNARY_OP_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, GYS_ret_val);          
00346 
<a name="l00347"></a><a class="code" href="group__proto.html#a5">00347</a> <span class="keyword">typedef</span> GYS_ret_val(*GYS_CONVERTER_PTR)(<a class="code" href="classGYS.html">GYS</a>*, GYS_ret_val); 
00348 
<a name="l00349"></a><a class="code" href="group__proto.html#a6">00349</a> <span class="keyword">typedef</span> void(*GYS_WARNING_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, string, string);     
<a name="l00350"></a><a class="code" href="group__proto.html#a7">00350</a> <span class="keyword">typedef</span> void(*GYS_ERROR_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, string, string);       
<a name="l00351"></a><a class="code" href="group__proto.html#a8">00351</a> <span class="keyword">typedef</span> void(*GYS_FATAL_ERROR_FUNC_PTR)(<a class="code" href="classGYS.html">GYS</a>*, string, string); 
00352 
00354 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::standard error and warning handlers:::::::::::::::::::::::::::::::::::::::::</span>
00355 
00356 <span class="keywordtype">void</span> <a class="code" href="gys_8cpp.html#a4">std_gys_warning_callback</a>(<a class="code" href="classGYS.html">GYS</a>* s, string str1, string str2); 
00357 
00358 <span class="keywordtype">void</span> <a class="code" href="gys_8cpp.html#a5">std_gys_error_callback</a>(<a class="code" href="classGYS.html">GYS</a>* s, string str1, string str2); 
00359 
00360 <span class="keywordtype">void</span> <a class="code" href="gys_8cpp.html#a6">std_gys_fatal_error_callback</a>(<a class="code" href="classGYS.html">GYS</a>* s, string str1, string str2); 
00361 
00362 <span class="comment">//:::::::::::::::::::::::::::::::::::::::::Token types:::::::::::::::::::::::::::::::::::::::::</span>
<a name="l00364"></a><a class="code" href="gys_8h.html#a28">00364</a> <span class="comment"></span><span class="keyword">enum</span> <a class="code" href="gys_8h.html#a28">GYS_tok_type</a>{
00365         <a class="code" href="gys_8h.html#a28a12">GYS_NAME</a>,      
00366         <a class="code" href="gys_8h.html#a28a13">GYS_CONST</a>,     
00367         <a class="code" href="gys_8h.html#a28a14">GYS_DOUBLE</a>,    
00368         <a class="code" href="gys_8h.html#a28a15">GYS_STRING</a>,    
00369         <a class="code" href="gys_8h.html#a28a16">GYS_CHAR</a>,      
00370         <a class="code" href="gys_8h.html#a28a17">GYS_DELIMETER</a>, 
00371         <a class="code" href="gys_8h.html#a28a18">GYS_EOF</a>        
00372 };
00373 
00374 <span class="comment">//::::::::::::::::::::::::::::::::::::::::::::Flags::::::::::::::::::::::::::::::::::::::::::::</span>
<a name="l00376"></a><a class="code" href="gys_8h.html#a29">00376</a> <span class="comment"></span><span class="keyword">enum</span> <a class="code" href="gys_8h.html#a29">GYS_flag</a>{
00377         <a class="code" href="gys_8h.html#a29a19">GYS_ESC</a>,                
00378         <a class="code" href="gys_8h.html#a29a20">GYS_GLOBAL_VAR_OP</a>,      
00379 };
00380 
00382 
<a name="l00386"></a><a class="code" href="classGYS.html">00386</a> <span class="keyword">class </span><a class="code" href="classGYS.html">GYS</a>
00387 {
00388 <span class="keyword">private</span>:
00389         <span class="keyword">typedef</span> map&lt;string, GYS_FUNC_PTR&gt;                                  GYS_func_map; 
00390         <span class="keyword">typedef</span> map&lt;string, GYS_TYPE_FUNC_PTR&gt;                             GYS_type_func_map;
00391         <span class="keyword">typedef</span> map&lt; string, pair&lt;GYS_ret_val, bool&gt; &gt;                     GYS_var_map;
00392         <span class="keyword">typedef</span> map&lt; GYS_binary_op, pair&lt;string, GYS_BINARY_OP_FUNC_PTR&gt; &gt; GYS_binary_op_map;
00393         <span class="keyword">typedef</span> map&lt;GYS_pre_unary_op, GYS_PRE_UNARY_OP_FUNC_PTR&gt;           GYS_pre_unary_op_map;
00394         <span class="keyword">typedef</span> map&lt;GYS_post_unary_op, GYS_POST_UNARY_OP_FUNC_PTR&gt;         GYS_post_unary_op_map;
00395         <span class="keyword">typedef</span> map&lt;GYS_converter, GYS_CONVERTER_PTR&gt;                      GYS_converter_map;
00396 
00397         string name;    
00398         istream* file; <span class="comment">// input</span>
00399         <span class="keywordtype">long</span> line_num, error_num, warning_num;
00400         
00401         string token;          <span class="comment">// ext. repr. of token</span>
00402         <a class="code" href="gys_8h.html#a28">GYS_tok_type</a> tok_type; 
00403         <span class="keywordtype">double</span> tok_val;        <span class="comment">// token double value</span>
00404         <span class="keywordtype">bool</span> is_putbacked;     
00405 
00406         GYS_func_map          func_map; 
00407         GYS_type_func_map     type_func_map; 
00408         GYS_var_map           var_map; 
00409         GYS_binary_op_map     binary_op_map;
00410         GYS_pre_unary_op_map  pre_unary_op_map;
00411         GYS_post_unary_op_map post_unary_op_map;
00412         GYS_converter_map     converter_map;
00413         <span class="keyword">static</span> GYS_var_map    global_var_map;
00414 
00415         string      ret_type;
00416         GYS_ret_val ret_val;
00417 
00418         <span class="keywordtype">bool</span> was_finished;
00419 
00420         <a class="code" href="group__proto.html#a6">GYS_WARNING_FUNC_PTR</a>     warning_func;
00421         <a class="code" href="group__proto.html#a7">GYS_ERROR_FUNC_PTR</a>       error_func;
00422         <a class="code" href="group__proto.html#a8">GYS_FATAL_ERROR_FUNC_PTR</a> fatal_error_func;
00423 
00424         <a class="code" href="classGYS.html">GYS</a>* super_script;
00425 
00426         bitset&lt;8&gt; flags;
00427 
00428 <span class="keyword">public</span>:
00430 
00437         <a class="code" href="classGYS.html#a0">GYS</a>(string name_str=<span class="stringliteral">"unnamed"</span>, string return_type=<a class="code" href="group__std__types.html#a0">gys_void_type</a>, istream* in=&amp;cin);
00438                 
00440 
00445         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a1">set_name</a>(string name_str);
00446 
00448 
00456         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a2">set_input</a>(istream* in);
00457 
00459 
00462     <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a3">interp_next</a>();
00463 
00465 
00468     <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a4">interp</a>();
00469 
00471 
00477     <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a5">finish_script</a>();
00478         
00480 
00485         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a6">set_ret_type</a>(string return_type);
00486 
00488 
00493         string <a class="code" href="classGYS.html#a7">get_ret_type</a>() <span class="keyword">const</span>;
00494 
00496 
00503         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a8">set_ret_val</a>(GYS_ret_val val);
00504 
00506 
00511         GYS_ret_val <a class="code" href="classGYS.html#a9">get_ret_val</a>() <span class="keyword">const</span>;
00512 
00514 
00520         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a10">enable</a>(<a class="code" href="gys_8h.html#a29">GYS_flag</a> flag);
00521 
00523 
00529         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a11">disable</a>(<a class="code" href="gys_8h.html#a29">GYS_flag</a> flag);
00530 
00532 
00538         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a12">is_enabled</a>(<a class="code" href="gys_8h.html#a29">GYS_flag</a> flag) <span class="keyword">const</span>;
00539 
00541 
00546         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a13">set_warning_func</a>(<a class="code" href="group__proto.html#a6">GYS_WARNING_FUNC_PTR</a> pf);
00547 
00549 
00554         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a14">set_error_func</a>(<a class="code" href="group__proto.html#a7">GYS_ERROR_FUNC_PTR</a> pf);
00555 
00557 
00562         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a15">set_fatal_error_func</a>(<a class="code" href="group__proto.html#a8">GYS_FATAL_ERROR_FUNC_PTR</a> pf);
00563 
00565 
00571         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a16">warning</a>(string str1, string str2=<span class="stringliteral">""</span>);     <span class="comment">// warning</span>
00572 
00574 
00580         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a17">error</a>(string str1, string str2=<span class="stringliteral">""</span>);       <span class="comment">// error</span>
00581 
00583 
00589         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a18">fatal_error</a>(string str1, string str2=<span class="stringliteral">""</span>); <span class="comment">// fatal error (finishes interpretation)</span>
00590 
00592 
00600         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a19">add_gys_func</a>(string ext_repr, <a class="code" href="group__proto.html#a0">GYS_FUNC_PTR</a> pf);                          
00601 
00603 
00611         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a20">add_gys_type</a>(string type_str, <a class="code" href="group__proto.html#a1">GYS_TYPE_FUNC_PTR</a> pf); 
00612 
00614 
00623         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a21">add_gys_converter</a>(string from_type, string into_type, <a class="code" href="group__proto.html#a5">GYS_CONVERTER_PTR</a> pf); 
00624 
00626 
00649         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a22">add_binary_op</a>(string opname, string l_type, string r_type, <a class="code" href="group__proto.html#a2">GYS_BINARY_OP_FUNC_PTR</a> pf);
00650 
00652 
00670         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a23">add_pre_unary_op</a>(string opname, string ret_type, <a class="code" href="group__proto.html#a3">GYS_PRE_UNARY_OP_FUNC_PTR</a> pf);
00671 
00673 
00687         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a24">add_post_unary_op</a>(string opname, string l_type, <a class="code" href="group__proto.html#a4">GYS_POST_UNARY_OP_FUNC_PTR</a> pf);
00688 
00690 
00703         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a25">add_local_var</a>(string var_name, GYS_ret_val val);
00704 
00706 
00722         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a26">add_global_var</a>(string var_name, GYS_ret_val val);
00723 
00725 
00730         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a27">remove_gys_func</a>(string ext_repr);
00731 
00733 
00738         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a28">remove_gys_type</a>(string type_str); 
00739 
00741 
00747         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a29">remove_gys_converter</a>(string from_type, string into_type); 
00748 
00750 
00756         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a30">remove_binary_op</a>(string opname, string l_type);
00757 
00759 
00765         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a31">remove_pre_unary_op</a>(string opname, string ret_type);
00766 
00768 
00774         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a32">remove_post_unary_op</a>(string opname, string l_type);
00775 
00777 
00782         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a33">remove_local_var</a>(string var_name);
00783 
00785 
00790         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classGYS.html#e0">remove_global_var</a>(string var_name);
00791 
00793 
00796         <a class="code" href="gys_8h.html#a28">GYS_tok_type</a> <a class="code" href="classGYS.html#a34">get_token</a>();
00797 
00799 
00804         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a35">exam</a>(string tok);
00805 
00807 
00812         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a35">exam</a>(<a class="code" href="gys_8h.html#a28">GYS_tok_type</a> tok_type);
00813 
00815 
00819         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a37">putback_tok</a>();
00820 
00822 
00827         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a38">set_pos</a>(<span class="keywordtype">long</span> new_pos);
00828 
00830 
00837         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a39">set_line_num</a>(<span class="keywordtype">long</span> new_linenum);
00838 
00840 
00847         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a40">set_super_script</a>(<a class="code" href="classGYS.html">GYS</a>* script);
00848 
00850 
00853         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a41">copy_params_to_sub</a>(<a class="code" href="classGYS.html">GYS</a>* script);
00854 
00856 
00859         <span class="keywordtype">void</span> <a class="code" href="classGYS.html#a42">copy_vars_to_script</a>(<a class="code" href="classGYS.html">GYS</a>* script);
00860 
00862 
00867         GYS_ret_val <a class="code" href="classGYS.html#a43">get_val</a>(string type_name);
00868 
00870 
00879         GYS_ret_val <a class="code" href="classGYS.html#a44">get_var_val</a>(string var_name);        
00880 
00882 
00889         GYS_ret_val <a class="code" href="classGYS.html#a45">get_local_var_val</a>(string var_name);  
00890 
00892 
00899         GYS_ret_val <a class="code" href="classGYS.html#a46">get_global_var_val</a>(string var_name); 
00900 
00902 
00910         GYS_ret_val <a class="code" href="classGYS.html#a47">exec_converter</a>(GYS_ret_val val, string into_type);
00911 
00913 
00918         string <a class="code" href="classGYS.html#a48">get_tok_str</a>() <span class="keyword">const</span>;
00919 
00921 
00924         <a class="code" href="gys_8h.html#a28">GYS_tok_type</a> <a class="code" href="classGYS.html#a49">get_tok_type</a>() <span class="keyword">const</span>;
00925 
00927 
00932         <span class="keywordtype">double</span> <a class="code" href="classGYS.html#a50">get_tok_val</a>() <span class="keyword">const</span>;
00933 
00935 
00940         string <a class="code" href="classGYS.html#a51">get_name</a>() <span class="keyword">const</span>;
00941 
00943 
00948         <span class="keywordtype">long</span> <a class="code" href="classGYS.html#a52">get_line_num</a>() <span class="keyword">const</span>;
00949 
00951 
00956         <span class="keywordtype">long</span> <a class="code" href="classGYS.html#a53">get_error_num</a>() <span class="keyword">const</span>;
00957 
00959 
00964         <span class="keywordtype">long</span> <a class="code" href="classGYS.html#a54">get_warning_num</a>() <span class="keyword">const</span>;
00965 
00967 
00972         <span class="keywordtype">long</span> <a class="code" href="classGYS.html#a55">get_pos</a>();
00973 
00975 
00980         <span class="keywordtype">bool</span> <a class="code" href="classGYS.html#a56">is_finished</a>() <span class="keyword">const</span>;
00981 
00983 
00988         <a class="code" href="classGYS.html">GYS</a>* <a class="code" href="classGYS.html#a57">get_super_script</a>() <span class="keyword">const</span>;
00989 
00990         <span class="keywordtype">bool</span> is_binary_op(string op) <span class="keyword">const</span>;
00991         <span class="keywordtype">bool</span> is_pre_unary_op(string op) <span class="keyword">const</span>;
00992         <span class="keywordtype">bool</span> is_post_unary_op(string op) <span class="keyword">const</span>;
00993 
00994         <span class="keywordtype">bool</span> is_local_var(string var_name); 
00995         <span class="keywordtype">bool</span> is_local_const(string var_name);
00996         <span class="keywordtype">bool</span> is_global_var(string var_name); 
00997         <span class="keywordtype">bool</span> is_global_const(string const_name);
00998 
00999         <span class="keywordtype">bool</span> is_var(string var_name);
01000         <span class="keywordtype">bool</span> is_const(string var_name);
01001         <span class="keywordtype">bool</span> is_typename(string name);
01002         <span class="keywordtype">bool</span> is_func(string name);
01003         
01004 <span class="keyword">private</span>:
01005         <span class="keywordtype">void</span> init(); <span class="comment">// total reinit</span>
01006 
01007         GYS_ret_val exec_func();                                    <span class="comment">// just try to process the function </span>
01008         GYS_ret_val exec_binary_op(GYS_ret_val lval, <span class="keywordtype">int</span> cur_prec); <span class="comment">// a@...</span>
01009         GYS_ret_val exec_pre_unary_op(string ret_type);             <span class="comment">// @...</span>
01010         GYS_ret_val exec_post_unary_op(GYS_ret_val lval);           <span class="comment">// a@</span>
01011                 
01012         <span class="comment">// expr anal</span>
01013         GYS_ret_val <a class="code" href="classGYS.html#a43">get_val</a>(string type, <span class="keywordtype">int</span> cur_prec); <span class="comment">// with precedence for ops</span>
01014 
01015         GYS_ret_val get_expr_1(string type);
01016         GYS_ret_val get_expr_2(string type);
01017         GYS_ret_val get_expr_3(string type);
01018         GYS_ret_val get_expr_4(string type);
01019         GYS_ret_val get_expr_5(string type);
01020         GYS_ret_val get_expr_6(string type);
01021         GYS_ret_val get_expr_7(string type);
01022         GYS_ret_val get_expr_8(string type);
01023         GYS_ret_val get_prim(string type);
01024 
01025         GYS_ret_val get_raw_val(string type_name);
01026 
01027         GYS_ret_val* get_var(string name);         
01028         GYS_ret_val* get_local_var(string name);   
01029         GYS_ret_val* get_global_var(string name);
01030 };
01031 
01032 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jul 7 13:56:03 2004 for GYS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.3 </small></address>
</body>
</html>
